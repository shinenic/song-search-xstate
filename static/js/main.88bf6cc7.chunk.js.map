{"version":3,"sources":["img/loading.svg","img/search.svg","img/cross.svg","machine/fsm.js","utils/base.js","machine/guards.js","machine/actions.js","graphql/client.js","config/index.js","graphql/queries/songs.js","machine/services.js","machine/index.js","context/searchPage.js","components/result/idle.js","components/result/noResult.js","components/result/error.js","hooks/common/useDoubleClick.js","components/result/resultRow.js","utils/result.js","hooks/common/useSmoothLoading.js","components/result/loading/fetchMoreLoading.js","components/result/loading/searchKeywordLoading.js","hooks/common/useScrollBottom.js","components/result/showResult.js","components/result/index.js","hooks/common/useClickTouchOutside.js","hooks/useSearchBox.js","components/searchBox/index.js","components/main.js","searchPage.js","serviceWorker.js","index.js"],"names":["module","exports","menuState","menu","initial","states","closed","on","TOGGLE_MENU","target","actions","send","opened","searchBoxState","searchBox","enable","CHANGE_INPUT","cond","TOGGLE_CLEAN","DISABLE_SEARCH_BOX","disable","ENABLE_SEARCH_BOX","result","TOGGLE_IDLE","SEARCH_WITH_DEBOUNCE","FETCH_MORE","VERIFY_PARAMS","idle","searchBuffer","entry","verifyingParams","searching","exit","invoke","id","src","onDone","onError","errorResult","RETRY","noResult","type","showResult","removeAllWhiteSpaces","str","replace","isZhuyin","test","isEmptyString","isString","isEmpty","isEmptyArray","arr","isArray","shouldSkipDebounce","_","e","skipDebounce","withInput","ctx","input","withResultOnly","invalidParams","last","trim","isNoResult","get","cancel","setActions","setInput","assign","cleanInput","cleanResult","setResult","pagination","setLoading","loading","setLoaded","setNoError","error","setError","data","setKeyword","variables","keyword","page","setPage","debounceSearchActions","sendSearchEventAfterDelay","delay","cancelSearch","cache","InMemoryCache","client","ApolloClient","uri","SONGS_QUERY","gql","fetchResult","Promise","reslove","reject","query","fetchPolicy","retry","then","res","errors","ZhuoZhuSearchMachine","Machine","context","guards","services","SearchPageContext","createContext","useSearchPageContext","useContext","SearchPageProvider","children","useMachine","state","Provider","value","searchKeywordLoading","fetchMoreLoading","sendChangeInput","sendToggleClean","sendFetchMore","sendRetry","getSearchPageContext","Idle","className","NoResult","onClick","useDoubleClick","onDoubleClick","ref","useRef","useEffect","clickTimeout","lastTapTime","current","handleDoubleClick","event","currentTime","Date","getTime","tapLengthOfTime","clearTimeout","preventDefault","setTimeout","addEventListener","removeEventListener","ResultRow","React","memo","song","searchArtist","titleRef","title","artist","window","confirm","open","focus","showConnectToYoutube","artistRef","position","volume","Number","useSmoothLoading","isLoading","useState","showLoading","setShowLoading","cancelLoading","debounce","a","FetchMoreLoading","loadingIcon","alt","SearchKeywordLoading","useScrollBottom","handleScrollBottom","bottomThreshold","handleScroll","innerHeight","pageYOffset","document","body","offsetHeight","Result","useCallback","currentPage","totalPages","showSearchKeywordLoading","map","key","resultState","useClickTouchOutside","handleClickTouchOutside","handleEvent","contains","useSearchBox","inputRef","searchBoxRef","blur","inputText","handleOnChange","isSmooth","scrollTo","top","behavior","scrollToTop","handleClearBtnClick","showSearchIcon","handleSearchBtnClick","SearchBox","placeholder","onChange","searchIcon","crossIcon","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","ReactDOM","render","getElementById","URL","process","href","origin","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.88bf6cc7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.0f51771c.svg\";","module.exports = __webpack_public_path__ + \"static/media/search.fa72ba04.svg\";","module.exports = __webpack_public_path__ + \"static/media/cross.4f744e82.svg\";","import { send } from 'xstate'\n\nconst menuState = {\n  menu: {\n    initial: 'closed',\n    states: {\n      closed: {\n        on: {\n          TOGGLE_MENU:\n            { target: 'opened', actions: send('DISABLE_SEARCH_BOX') }\n        }\n      },\n      opened: {\n        on: {\n          TOGGLE_MENU:\n            { target: 'closed', actions: send('ENABLE_SEARCH_BOX') }\n        }\n      }\n    }\n  }\n}\n\nconst searchBoxState = {\n  searchBox: {\n    initial: 'enable',\n    states: {\n      enable: {\n        on: {\n          CHANGE_INPUT: [\n            { cond: 'withResultOnly', actions: ['cleanInput', 'cleanResult', send('TOGGLE_IDLE')] },\n            // For query artist name or something immediately\n            { cond: 'shouldSkipDebounce', actions: ['setInput', 'setKeyword', send('VERIFY_PARAMS')] },\n            { actions: ['setInput', 'setKeyword', send('SEARCH_WITH_DEBOUNCE')] }\n          ],\n          TOGGLE_CLEAN: [\n            { cond: 'withInput', actions: 'cleanInput' },\n            { cond: 'withResultOnly', actions: ['cleanResult', send('TOGGLE_IDLE')] }\n          ],\n          DISABLE_SEARCH_BOX: 'disable'\n        }\n      },\n      disable: {\n        on: {\n          ENABLE_SEARCH_BOX: 'enable'\n        }\n      }\n    }\n  }\n}\n\nconst resultState = {\n  result: {\n    initial: 'idle',\n    on: {\n      TOGGLE_IDLE: {\n        target: '.idle'\n      },\n      SEARCH_WITH_DEBOUNCE: {\n        target: '.searchBuffer'\n      },\n      FETCH_MORE: {\n        actions: 'setPage',\n        target: '.verifyingParams'\n      },\n      VERIFY_PARAMS: {\n        target: '.verifyingParams'\n      }\n    },\n    states: {\n      idle: {},\n      searchBuffer: {\n        entry: ['cancelSearch', 'sendSearchEventAfterDelay']\n      },\n      verifyingParams: {\n        on: {\n          '': [{ target: 'idle', cond: 'invalidParams' }, { target: 'searching' }]\n        }\n      },\n      searching: {\n        entry: ['setLoading', 'setNoError'],\n        exit: ['setLoaded'],\n        invoke: {\n          id: 'fetch-result',\n          src: 'fetchResult',\n          onDone: [\n            { target: 'noResult', cond: 'isNoResult' },\n            { target: 'showResult', actions: 'setResult' }\n          ],\n          onError: {\n            target: 'errorResult', actions: 'setError'\n          }\n        }\n      },\n      errorResult: {\n        on: {\n          RETRY: {\n            target: 'searching'\n          }\n        }\n      },\n      noResult: { type: 'final' },\n      showResult: { type: 'final' }\n    }\n  }\n}\n\nexport default {\n  ...resultState,\n  ...searchBoxState,\n  ...menuState\n}","import { isArray, isEmpty, isString, last, toPairs } from 'lodash'\n\nexport const removeAllWhiteSpaces = str => {\n  return str.replace(/[\\r\\n\\s]/g, '')\n}\n\nexport const isZhuyin = str => {\n  const zhuyin = /[\\u3105-\\u3129\\u02CA\\u02C7\\u02CB\\u02D9]/\n  return zhuyin.test(str)\n}\n\nexport const isValidKeywordQueryString = str => {\n  const strWithoutWhiteSpace = removeAllWhiteSpaces(str)\n  if (isEmpty(strWithoutWhiteSpace))\n    return false\n  if (isZhuyin(last(strWithoutWhiteSpace)))\n    return false\n  return true\n}\n\nexport const showConnectToYoutube = (title, keyword) => {\n  const check = window.confirm(`連結至Youtube搜尋 \"${title}\" `)\n  if (check) {\n    window.open(`https://www.youtube.com/results?search_query=${keyword}`, '_blank').focus()\n  }\n}\n\nexport const isUrlSearchParamTrue = param => {\n  const urlParams = new URLSearchParams(window.location.search)\n  if (!urlParams.has(param)) return false\n  const value = urlParams.get(param).toUpperCase()\n  return isEmptyString(value) || value === 'TRUE'\n}\n\nexport const getParamsValue = params => {\n  const urlParams = new URLSearchParams(window.location.search)\n  return params.reduce((acc, param) => (\n    { ...acc, [param]: urlParams.get(param) }\n  ), {})\n}\n\nexport const scrollToTop = (isSmooth = false) => {\n  window.scrollTo({ top: 0, behavior: isSmooth ? 'smooth' : 'auto' })\n}\n\nexport const encodeQueryData = (data = {}) => (\n  toPairs(data).map(pair => (\n    `${encodeURIComponent(pair[0])}=${encodeURIComponent(pair[1])}`\n  )).join('&')\n)\n\nexport const isEmptyString = str => isString(str) && isEmpty(str)\n\nexport const isEmptyArray = arr => isArray(arr) && isEmpty(arr)\n","import { isZhuyin, isEmptyString, isEmptyArray } from 'utils/base'\nimport { get, last } from 'lodash'\n\nexport default {\n  shouldSkipDebounce: (_, e) => e.skipDebounce || false,\n  withInput: ctx => !isEmptyString(ctx.input),\n  withResultOnly: (ctx, e) => !isEmptyArray(ctx.result) && (isEmptyString(ctx.input) || isEmptyString(e.input)),\n  invalidParams: ctx => isEmptyString(ctx.input) || isZhuyin(last(ctx.input.trim())),\n  isNoResult: (_, e) => isEmptyArray(get(e, ['data', 'songs', 'result'], [])) // `Null` won't be replaced into defaulValue(third argument)\n    || !get(e, ['data', 'songs', 'result'])\n}","import { send, assign, actions } from 'xstate'\nimport { removeAllWhiteSpaces } from 'utils/base'\nimport { get } from 'lodash'\nconst { cancel } = actions\n\nconst SEARCH_DEBOUNCE_TIME = 300\n\nconst setActions = {\n  setInput: assign({ input: (_, e) => e.input || '' }),\n  cleanInput: assign({ input: '' }),\n  cleanResult: assign({ result: [] }),\n  setResult: assign({\n    result: (ctx, e) => {\n      if (get(e, ['data', 'songs', 'pagination', 'currentPage'], 1) > 1) {\n        return [...ctx.result, ...get(e, ['data', 'songs', 'result'], [])]\n      }\n      return get(e, ['data', 'songs', 'result'], [])\n    },\n    pagination: (_, e) => get(e, ['data', 'songs', 'pagination'], {}),\n  }),\n  setLoading: assign({ loading: true }),\n  setLoaded: assign({ loading: false }),\n  setNoError: assign({ error: null }),\n  setError: assign({ error: (_, e) => e.data || true }),\n  setKeyword: assign({\n    variables: (_, e) => ({\n      keyword: removeAllWhiteSpaces(e.input || ''),\n      page: 1\n    })\n  }),\n  setPage: assign({\n    variables: (ctx, e) => ({\n      ...ctx.variables,\n      page: e.page || 1\n    })\n  })\n}\n\nconst debounceSearchActions = {\n  sendSearchEventAfterDelay: send('VERIFY_PARAMS', {\n    delay: SEARCH_DEBOUNCE_TIME,\n    id: 'debounced-search'\n  }),\n  cancelSearch: cancel('debounced-search'),\n}\n\nexport default {\n  ...setActions,\n  ...debounceSearchActions\n}","import ApolloClient from 'apollo-boost'\nimport { GRAPHQL_PATH } from 'config/index'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\n\nconst cache = new InMemoryCache()\n\nexport const client = new ApolloClient({ uri: GRAPHQL_PATH, cache })\n","export const api = {\n  songs: 'https://zhuo-zhu-api.kadenzwei.com/api/songs',\n  postHistory: 'https://zhuo-zhu-api.kadenzwei.com/api/song',\n}\n\nexport const INIT_RESULT_COUNT = 10\n\nexport const ADDITION_RESULT_COUNT = 10\n\nexport const GRAPHQL_PATH = 'https://zhuo-zhu-api.kadenzwei.com/graphql'\n","import { gql } from \"apollo-boost\";\n\nexport const SONGS_QUERY = gql`\n  query Songs($keyword: String, $page: Int) {\n    songs(keyword: $keyword, page: $page) {\n      result {\n        title\n        artist\n        volume\n        page\n      }\n      pagination {\n        totalCount\n        pageSize\n        totalPages\n        currentPage\n      }\n    }\n  }\n`\n","import { client } from 'graphql/client'\nimport { SONGS_QUERY } from 'graphql/queries/songs'\n\nexport default {\n  fetchResult: (ctx, e) => {\n    return new Promise((reslove, reject) => {\n      client.query({\n        query: SONGS_QUERY,\n        // Note 1. If user input keyword via voice search,\n        //         it will create extra white space in the end.\n        // Note 2. The API doesn't need white space to implement fuzzy matching.\n        variables: ctx.variables,\n        fetchPolicy: e.retry ? 'network-only' : 'cache-first'\n      }).then(res => {\n        // For demo error handle\n        // if (Math.round(Math.random() * 10) <= 5) reject(res.errors)\n        if (res.errors) reject(res.errors)\n        reslove(res.data)\n      })\n    })\n  }\n}\n","import { Machine } from 'xstate'\nimport states from './fsm'\nimport guards from './guards'\nimport actions from './actions'\nimport services from './services'\n\nconst initialContext = {\n  input: '',\n  result: [],\n  pagination: {},\n  loading: false,\n  error: null,\n  variables: {\n    keyword: '',\n    page: 1\n  }\n}\n\nexport const ZhuoZhuSearchMachine = Machine({\n  id: 'ZhuoZhuSearch',\n  context: initialContext,\n  type: 'parallel',\n  states\n}, {\n  actions,\n  guards,\n  services\n})\n","import React, { createContext, useContext } from 'react'\nimport { get } from 'lodash'\nimport { useMachine } from '@xstate/react';\nimport { ZhuoZhuSearchMachine } from 'machine/index'\n\nconst SearchPageContext = createContext()\n\nexport const useSearchPageContext = () => useContext(SearchPageContext)\n\n/* \n  TODOS:\n    1. Incognito & History: record and send history to server and localstore when Incognito mode off\n    2. Implement menu for other pages\n*/\nconst SearchPageProvider = ({ children }) => {\n  const [state, send] = useMachine(ZhuoZhuSearchMachine)\n\n  // For Debug\n  // console.table(state.value)\n  // console.log(state.context)\n\n  const getSendActions = () => ({\n    sendChangeInput: (input, skipDebounce = false) => send({ type: 'CHANGE_INPUT', input, skipDebounce }),\n    sendToggleClean: () => send('TOGGLE_CLEAN'),\n    sendFetchMore: page => send({ type: 'FETCH_MORE', page }),\n    sendRetry: () => send({ type: 'RETRY', retry: true }),\n  })\n\n  const getSearchPageContext = () => {\n    const { context } = state\n    return {\n      state,\n      send,\n      context,\n      searchKeywordLoading: context.loading && get(context, ['variables', 'page'], 1) === 1,\n      fetchMoreLoading: context.loading && get(context, ['variables', 'page'], 1) !== 1,\n      ...getSendActions()\n    }\n  }\n\n  return (\n    <SearchPageContext.Provider value={getSearchPageContext()}>\n      {children}\n    </SearchPageContext.Provider>\n  )\n}\n\nexport default SearchPageProvider\n","import React from 'react'\n\nconst Idle = () => (\n  <div className=\"idle-result\">Please enter something to search.</div>\n)\n\nexport default Idle\n","import React from 'react'\n\nconst NoResult = () => (\n  <div className=\"no-result\">Nothing found.</div>\n)\n\nexport default NoResult\n","import React from 'react'\nimport { useSearchPageContext } from 'context/searchPage'\n\nconst Idle = () => {\n  const { sendRetry } = useSearchPageContext()\n\n  return (\n    <div className=\"error-result\">\n      An error occurred, please&nbsp;\n        <span className=\"error-result__retry\" onClick={sendRetry}>\n        try again\n        </span>\n      .\n    </div>\n  )\n}\n\nexport default Idle\n","import { useRef, useEffect } from 'react'\n\nconst SINGLE_TAP_TIME_OUT = 450\n\nconst useDoubleClick = (onDoubleClick) => {\n  const ref = useRef()\n\n  useEffect(() => {\n    let clickTimeout = null\n    let lastTapTime = 0\n    const target = ref.current\n\n    const handleDoubleClick = (event) => {\n      const currentTime = new Date().getTime()\n      const tapLengthOfTime = currentTime - lastTapTime\n      clearTimeout(clickTimeout)\n\n      if (tapLengthOfTime > 0 && tapLengthOfTime < SINGLE_TAP_TIME_OUT) {\n        onDoubleClick()\n        event.preventDefault()\n      } else {\n        clickTimeout = setTimeout(() => { clearTimeout(clickTimeout) }, SINGLE_TAP_TIME_OUT)\n      }\n      lastTapTime = currentTime\n    }\n\n    target.addEventListener('click', handleDoubleClick)\n    return () => {\n      target.removeEventListener('click', handleDoubleClick)\n    }\n  })\n  return ref\n}\n\nexport default useDoubleClick\n","import React from 'react'\nimport useDoubleClick from 'hooks/common/useDoubleClick'\nimport { showConnectToYoutube } from 'utils/base'\nimport { normalizeSearchResultText } from 'utils/result'\n\nconst ResultRow = React.memo(({ song, searchArtist }) => {\n  const titleRef = useDoubleClick(() => {\n    const { title, artist } = song\n    showConnectToYoutube(title, `${title}+${artist.replace(/[/+]/ig, '+')}`)\n  })\n  const artistRef = useDoubleClick(() => searchArtist(song.artist))\n\n  const { title, artist, position } = normalizeSearchResultText(song)\n  return (\n    <div className=\"row\">\n      <div className=\"row__title\" ref={titleRef}>{title}</div>\n      <div className=\"row__artist\" ref={artistRef}>{artist}</div>\n      <div className=\"row__position\">{position}</div>\n    </div>\n  )\n})\n\nexport default ResultRow\n","export const normalizeSearchResultText = data => {\n  /*\n   * If no artist data                       => Replace artist text with \"-\"\n   * If there are multi artists in one field => Replace \"/\" and \"+\" with \"line break\"\n   *                                           (based on \"white-space: pre-wrap;\") \n   */\n  const artistText = (data.artist === '' || data.artist === 'XXX')\n    ? '-'\n    : data.artist.replace(/[/+]/ig, '\\n')\n  const positionText = data.volume === ''\n    ? Number(data.page)\n    : `${Number(data.volume)}/${Number(data.page)}`\n\n  return {\n    artist: artistText,\n    position: positionText,\n    title: data.title\n  }\n}","import { useState, useRef, useEffect } from 'react'\nimport { debounce } from 'lodash'\n\nconst SMOOTH_LOADING_TIME = 1500 // millisecond\n\nconst useSmoothLoading = (isLoading) => {\n  const [showLoading, setShowLoading] = useState(isLoading)\n\n  const cancelLoading = useRef(debounce(async () => {\n    setShowLoading(false)\n  }, SMOOTH_LOADING_TIME))\n\n\n  useEffect(() => {\n    const handleLoading = () => {\n      isLoading ? setShowLoading(true) : cancelLoading.current()\n    }\n\n    handleLoading()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isLoading])\n\n  return { showLoading, setShowLoading }\n}\n\nexport default useSmoothLoading","import React from 'react'\nimport loadingIcon from 'img/loading.svg'\n\nconst FetchMoreLoading = React.memo(({ isLoading }) => (\n  <div className=\"fetch-more-loading\">\n    <img\n      src={loadingIcon}\n      alt=\"icon\"\n      className={'fetch-more-loading__icon' + (isLoading ? '' : ' hide')}\n    />\n  </div>\n))\n\nexport default FetchMoreLoading\n","import React from 'react'\n\nconst SearchKeywordLoading = React.memo(({ isLoading }) => (\n  <div className=\"loading-container\">\n    <div className={isLoading ? 'loading-bar' : ''} />\n  </div>\n))\n\nexport default SearchKeywordLoading\n","import { useEffect } from 'react'\n\nconst useScrollBottom = (handleScrollBottom, bottomThreshold = 40) => {\n  useEffect(() => {\n    const handleScroll = () => {\n      if ((window.innerHeight + window.pageYOffset)\n        >= document.body.offsetHeight - bottomThreshold) {\n        handleScrollBottom()\n      }\n    }\n    window.addEventListener('scroll', handleScroll)\n    return () => {\n      window.removeEventListener('scroll', handleScroll)\n    }\n  })\n}\n\nexport default useScrollBottom\n","import React, { useCallback } from 'react'\nimport { useSearchPageContext } from 'context/searchPage'\nimport ResultRow from './resultRow'\nimport useSmoothLoading from 'hooks/common/useSmoothLoading'\nimport FetchMoreLoading from './loading/fetchMoreLoading'\nimport SearchKeywordLoading from './loading/searchKeywordLoading'\nimport useScrollBottom from 'hooks/common/useScrollBottom'\n\nconst Result = () => {\n  const {\n    context,\n    searchKeywordLoading,\n    fetchMoreLoading,\n    sendFetchMore,\n    sendChangeInput\n  } = useSearchPageContext()\n\n  const searchArtist = useCallback(\n    (artist) => { sendChangeInput(artist, true) },\n    [] // eslint-disable-line react-hooks/exhaustive-deps\n  )\n\n  useScrollBottom(() => {\n    const { pagination: { currentPage, totalPages } } = context\n    if (currentPage < totalPages) {\n      sendFetchMore(currentPage + 1)\n    }\n  })\n\n  const { showLoading: showSearchKeywordLoading } = useSmoothLoading(searchKeywordLoading)\n\n  return (\n    <div>\n      <SearchKeywordLoading isLoading={showSearchKeywordLoading} />\n      {context.result.map(song => (\n        <ResultRow\n          key={`${song.title}${song.volume}${song.page}`}\n          song={song}\n          searchArtist={searchArtist}\n        />\n      ))}\n      <FetchMoreLoading isLoading={fetchMoreLoading} />\n    </div>\n  )\n}\n\nexport default Result\n","import React from 'react'\nimport { useSearchPageContext } from 'context/searchPage'\nimport Idle from './idle'\nimport NoResult from './noResult'\nimport Error from './error'\nimport ShowResult from './showResult'\n\nconst Result = () => {\n  const { state } = useSearchPageContext()\n  const { value: { result: resultState } } = state\n\n  if (resultState === 'idle') return <Idle />\n\n  if (resultState === 'errorResult') return <Error />\n\n  if (resultState === 'noResult') return <NoResult />\n\n  return <ShowResult />\n}\n\nexport default Result\n","import { useEffect } from 'react'\n\nconst useClickTouchOutside = (ref = null, handleClickTouchOutside) => {\n  useEffect(() => {\n    const handleEvent = e => {\n      if (ref && !ref.current.contains(e.target)) {\n        handleClickTouchOutside()\n      }\n    }\n    document.addEventListener('mousedown', handleEvent)\n    document.addEventListener('touchstart', handleEvent)\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent)\n      document.removeEventListener('touchstart', handleEvent)\n    }\n  }, [ref, handleClickTouchOutside])\n}\n\nexport default useClickTouchOutside\n","import { useRef } from 'react'\nimport {\n  isEmptyArray,\n  isEmptyString,\n  scrollToTop\n} from 'utils/base'\nimport { useSearchPageContext } from 'context/searchPage'\nimport useClickTouchOutside from 'hooks/common/useClickTouchOutside'\n\nconst useSearchBox = () => {\n  const {\n    context,\n    sendChangeInput,\n    sendToggleClean\n  } = useSearchPageContext()\n\n  const handleOnChange = e => {\n    sendChangeInput(e.target.value)\n    scrollToTop()\n  }\n\n  const inputRef = useRef(null)\n  const searchBoxRef = useRef(null)\n\n  const setInputFocus = () => { inputRef.current.focus() }\n  const setInputBlur = () => { inputRef.current.blur() }\n\n  const handleClearBtnClick = () => { sendToggleClean() }\n\n  useClickTouchOutside(searchBoxRef, setInputBlur)\n\n  return {\n    inputText: context.input,\n    inputRef,\n    searchBoxRef,\n    handleOnChange,\n    handleClearBtnClick,\n    showSearchIcon: isEmptyArray(context.result) && isEmptyString(context.input),\n    handleSearchBtnClick: setInputFocus\n  }\n}\n\nexport default useSearchBox\n","import React from 'react'\nimport useSearchBox from 'hooks/useSearchBox'\nimport searchIcon from 'img/search.svg'\nimport crossIcon from 'img/cross.svg'\n\nconst SearchBox = () => {\n  const {\n    inputText,\n    inputRef,\n    searchBoxRef,\n    handleOnChange,\n    handleClearBtnClick,\n    showSearchIcon,\n    handleSearchBtnClick\n  } = useSearchBox()\n\n  return (\n    <div className=\"search-box\" ref={searchBoxRef}>\n      <input\n        className=\"search-box__input\"\n        type=\"text\"\n        placeholder=\"Title / Artist / Volume\"\n        value={inputText}\n        ref={inputRef}\n        onChange={handleOnChange}\n      />\n      {\n        showSearchIcon\n          ? <img\n            src={searchIcon}\n            alt=\"icon\"\n            className=\"search-box__icon search-box__icon--search\"\n            onClick={handleSearchBtnClick}\n          />\n          : <img\n            src={crossIcon}\n            alt=\"icon\"\n            className=\"search-box__icon search-box__icon--cross\"\n            onClick={handleClearBtnClick}\n          />\n      }\n    </div>\n  )\n}\n\nexport default SearchBox\n","import React from 'react'\nimport Result from 'components/result/index'\nimport SearchBox from 'components/searchBox/index'\n\nexport default () => (\n  <div className=\"main\">\n    <div className=\"search-page-placeholder\" />\n    <SearchBox />\n    <Result />\n  </div>\n)\n","import React from 'react'\nimport Main from 'components/main'\nimport SearchPageProvider from './context/searchPage'\nimport { ApolloProvider } from '@apollo/react-hooks'\nimport { client } from 'graphql/client'\n\nexport default () => (\n  <ApolloProvider client={client}>\n    <SearchPageProvider>\n      <Main />\n    </SearchPageProvider>\n  </ApolloProvider>\n)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/index.scss'\nimport SearchPage from './searchPage'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<SearchPage />, document.getElementById('root'))\n\nserviceWorker.register()\n"],"sourceRoot":""}